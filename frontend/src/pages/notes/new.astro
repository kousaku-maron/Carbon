---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { PostForm } from '../../components/PostForm';

const folderId = new URL(Astro.request.url).searchParams.get('folderId') || undefined;
if (!Astro.locals.user) {
  return Astro.redirect('/login');
}
---

<BaseLayout title="New Note | Vessel">
  <div class="page-header">
    <h1>New note</h1>
    <p class="muted text-sm">
      {folderId ? 'Create a note in the selected folder.' : 'Write and manage your markdown note.'}
    </p>
  </div>

  <section class="card">
    <PostForm mode="create" initialFolderId={folderId} client:load />
  </section>
</BaseLayout>

<style>
  .page-header {
    margin-bottom: 28px;
  }
  .page-header h1 {
    font-size: 1.75rem;
    margin: 0 0 4px;
  }
</style>
